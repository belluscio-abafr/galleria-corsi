{{- /* Meta tag SEO e Social Media */ -}}

{{- /* Variabili base */ -}}
{{- $title := .Title -}}
{{- $description := .Params.descrizione | default .Summary | default site.Params.description -}}
{{- $image := "" -}}
{{- $url := .Permalink -}}
{{- $siteName := site.Title -}}

{{- /* Per i progetti, usa il titolo personalizzato e l'immagine di copertina */ -}}
{{- if and .Params.titolo .Params.studente -}}
  {{- $title = printf "%s - %s" .Params.titolo .Params.studente -}}
  {{- if .Params.copertina -}}
    {{- $image = printf "%s%s" .RelPermalink .Params.copertina -}}
  {{- end -}}
{{- end -}}

{{- /* Meta tag SEO di base */ -}}
<meta name="description" content="{{ $description }}">
<meta name="author" content="{{ .Params.studente | default site.Params.institution }}">

{{- if .Params.temi -}}
<meta name="keywords" content="{{ delimit .Params.temi ", " }}{{ if .Params.tipologie }}, {{ delimit .Params.tipologie ", " }}{{ end }}">
{{- end -}}

{{- /* Open Graph meta tags */ -}}
<meta property="og:title" content="{{ $title }}">
<meta property="og:description" content="{{ $description }}">
<meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
<meta property="og:url" content="{{ $url }}">
<meta property="og:site_name" content="{{ $siteName }}">

{{- if $image -}}
<meta property="og:image" content="{{ $image | absURL }}">
<meta property="og:image:alt" content="{{ $title }}">
{{- end -}}

{{- /* Twitter Card meta tags */ -}}
<meta name="twitter:card" content="{{ if $image }}summary_large_image{{ else }}summary{{ end }}">
<meta name="twitter:title" content="{{ $title }}">
<meta name="twitter:description" content="{{ $description }}">

{{- if $image -}}
<meta name="twitter:image" content="{{ $image | absURL }}">
<meta name="twitter:image:alt" content="{{ $title }}">
{{- end -}}

{{- /* Meta tag aggiuntivi per i progetti */ -}}
{{- if .Params.studente -}}
<meta name="article:author" content="{{ .Params.studente }}">
{{- end -}}

{{- if .Params.corso -}}
<meta name="article:section" content="{{ .Params.corso }}">
{{- end -}}

{{- if .Params.anno_accademico -}}
<meta name="article:published_time" content="{{ .Params.anno_accademico }}">
{{- end -}}

{{- /* Canonical URL */ -}}
<link rel="canonical" href="{{ $url }}">

{{- /* Favicon */ -}}
<link rel="icon" href="{{ "favicon.ico" | relURL }}" type="image/x-icon">
